# -*- coding: utf-8 -*-# Define your item pipelines here## Don't forget to add your pipeline to the ITEM_PIPELINES setting# See: http://doc.scrapy.org/en/latest/topics/item-pipeline.htmlimport jsonfrom scrapy.exceptions import DropItemfrom Home_Link.db.house import Housefrom Home_Link.db.config import DBSessionclass JsonPipeline(object):    def __init__(self):        self.file = open('/Users/jyjsjd/Downloads/item.json', 'wb')    def process_item(self, item, spider):        line = json.dumps(dict(item)) + '\n'        self.file.write(line)        return itemclass NoIdPipeline(object):    def process_item(self, item, spider):        if item.get('id') == '':            return item        else:            raise DropItem('Missing id in %s' % item)class DataBasePipeline(object):    def open_spider(self, spider):        self.session = DBSession()    def process_item(self, item, spider):        h = House(            id=item['id'],            url=item['url'],            title=item['title'],            price=item['price'],            room=item['room'],            type=item['type'],            area=item['area'],            areaName=item['areaName']        )        self.session.add(h)        self.session.commit()    def close_spider(self, spider):        self.session.close()